## Graphics 解题报告

### 算法原理

如何保证 $n$ 条线段任意两条不相交？那么只能把 $x$ 坐标最小的与 $y$ 坐标最小的相连，$x$ 坐标第二小的与 $y$ 坐标最小的相连……即，将 $x$ 与 $y$ 分别按大小排序，将第 $i$ 组连接起来。

第 $i$ 条线段的解析式即为 $x_i x + y_i y = x_iy_i$。

由于答案具有单调性，也就是说，如果 $OP$ 能与前 $n$ 条线段相交，那么它一定能与前 $n - 1$ 条线段相交；所以我们可以使用二分答案的方法。

最后判断 $P(x, y)$ 是否在直线 $x_i x + y_i y = x_iy_i$ 的下方（或恰好位于直线上）即可。若 $x_i x + y_i y \ge x_iy_i$，则 $OP$ 与该线段有交点。

### 细节处理

#### `int` 还是 `long long`

由于坐标最大可达到 $2^{31}$，在判断步两个坐标相乘最大可达到 $2^{62}$，所以需要 `long long` 存储。

#### 二分区间怎么写

我的程序中，合法的答案区间为 $[l, r)$，所以我在二分初始时设置 $l \gets 0, r \gets n + 1$。

如果中点 $m = \dfrac{l + r}{2}$ 是合法的，那么答案区间应改为 $[m, r)$，即 $l \gets m$；如果是非法的，那么答案区间应改为 $[l, m)$，即 $r \gets m$。

当 $l = r - 1$ 时答案区间仅有 $l$ 一个数，即为答案。

### 时空复杂度分析

#### 时间复杂度

程序使用了两次归并排序，时间复杂度为 $O(n\log n)$。

程序使用了二分答案的算法，每次答案区间会缩小一半，而单次检查答案是否合法是 $O(1)$ 的，所以二分答案的算法是 $O(m\log n)$ 的。

因此整体时间复杂度为 $O((n + m) \log n)$。

#### 空间复杂度

由于只线性地存了三个数组，所以空间复杂度为 $O(n)$。
